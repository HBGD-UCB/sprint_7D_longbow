# Risk Factor Analysis







## Methods
## Outcome Variable

**Outcome Variable:** wast_rec90d

## Predictor Variables

**Intervention Variable:** cleanck

**Adjustment Set:**

* arm
* sex
* W_mage
* meducyrs
* feducyrs
* hhwealth_quart
* W_nrooms
* W_nhh
* W_nchldlt5
* impfloor
* delta_meducyrs
* delta_feducyrs
* delta_hhwealth_quart
* delta_W_nrooms
* delta_W_nhh
* delta_W_nchldlt5
* delta_impfloor

## Stratifying Variables

The analysis was stratified on these variable(s):

* agecat
* studyid
* country

## Data Summary

agecat        studyid                    country        cleanck    wast_rec90d   n_cell     n
------------  -------------------------  -------------  --------  ------------  -------  ----
0-24 months   ki0047075b-MAL-ED          SOUTH AFRICA   1                    0        0     1
0-24 months   ki0047075b-MAL-ED          SOUTH AFRICA   1                    1        1     1
0-24 months   ki0047075b-MAL-ED          SOUTH AFRICA   0                    0        0     1
0-24 months   ki0047075b-MAL-ED          SOUTH AFRICA   0                    1        0     1
0-24 months   ki1000108-CMC-V-BCS-2002   INDIA          1                    0       38   326
0-24 months   ki1000108-CMC-V-BCS-2002   INDIA          1                    1       81   326
0-24 months   ki1000108-CMC-V-BCS-2002   INDIA          0                    0       82   326
0-24 months   ki1000108-CMC-V-BCS-2002   INDIA          0                    1      125   326
0-24 months   ki1000108-IRC              INDIA          1                    0       84   383
0-24 months   ki1000108-IRC              INDIA          1                    1      135   383
0-24 months   ki1000108-IRC              INDIA          0                    0       72   383
0-24 months   ki1000108-IRC              INDIA          0                    1       92   383
0-24 months   ki1017093b-PROVIDE         BANGLADESH     1                    0       90   307
0-24 months   ki1017093b-PROVIDE         BANGLADESH     1                    1      144   307
0-24 months   ki1017093b-PROVIDE         BANGLADESH     0                    0       38   307
0-24 months   ki1017093b-PROVIDE         BANGLADESH     0                    1       35   307
0-24 months   ki1017093c-NIH-Crypto      BANGLADESH     1                    0       44   216
0-24 months   ki1017093c-NIH-Crypto      BANGLADESH     1                    1       69   216
0-24 months   ki1017093c-NIH-Crypto      BANGLADESH     0                    0       37   216
0-24 months   ki1017093c-NIH-Crypto      BANGLADESH     0                    1       66   216
0-24 months   ki1113344-GMS-Nepal        NEPAL          1                    0        4   509
0-24 months   ki1113344-GMS-Nepal        NEPAL          1                    1        3   509
0-24 months   ki1113344-GMS-Nepal        NEPAL          0                    0      238   509
0-24 months   ki1113344-GMS-Nepal        NEPAL          0                    1      264   509
0-6 months    ki0047075b-MAL-ED          SOUTH AFRICA   1                    0        0     1
0-6 months    ki0047075b-MAL-ED          SOUTH AFRICA   1                    1        1     1
0-6 months    ki0047075b-MAL-ED          SOUTH AFRICA   0                    0        0     1
0-6 months    ki0047075b-MAL-ED          SOUTH AFRICA   0                    1        0     1
0-6 months    ki1000108-CMC-V-BCS-2002   INDIA          1                    0       21   203
0-6 months    ki1000108-CMC-V-BCS-2002   INDIA          1                    1       58   203
0-6 months    ki1000108-CMC-V-BCS-2002   INDIA          0                    0       45   203
0-6 months    ki1000108-CMC-V-BCS-2002   INDIA          0                    1       79   203
0-6 months    ki1000108-IRC              INDIA          1                    0       52   232
0-6 months    ki1000108-IRC              INDIA          1                    1       82   232
0-6 months    ki1000108-IRC              INDIA          0                    0       33   232
0-6 months    ki1000108-IRC              INDIA          0                    1       65   232
0-6 months    ki1017093b-PROVIDE         BANGLADESH     1                    0       26   184
0-6 months    ki1017093b-PROVIDE         BANGLADESH     1                    1      117   184
0-6 months    ki1017093b-PROVIDE         BANGLADESH     0                    0       13   184
0-6 months    ki1017093b-PROVIDE         BANGLADESH     0                    1       28   184
0-6 months    ki1017093c-NIH-Crypto      BANGLADESH     1                    0        8   139
0-6 months    ki1017093c-NIH-Crypto      BANGLADESH     1                    1       61   139
0-6 months    ki1017093c-NIH-Crypto      BANGLADESH     0                    0        5   139
0-6 months    ki1017093c-NIH-Crypto      BANGLADESH     0                    1       65   139
0-6 months    ki1113344-GMS-Nepal        NEPAL          1                    0        2   163
0-6 months    ki1113344-GMS-Nepal        NEPAL          1                    1        2   163
0-6 months    ki1113344-GMS-Nepal        NEPAL          0                    0       68   163
0-6 months    ki1113344-GMS-Nepal        NEPAL          0                    1       91   163
6-24 months   ki1000108-CMC-V-BCS-2002   INDIA          1                    0       17   123
6-24 months   ki1000108-CMC-V-BCS-2002   INDIA          1                    1       23   123
6-24 months   ki1000108-CMC-V-BCS-2002   INDIA          0                    0       37   123
6-24 months   ki1000108-CMC-V-BCS-2002   INDIA          0                    1       46   123
6-24 months   ki1000108-IRC              INDIA          1                    0       32   151
6-24 months   ki1000108-IRC              INDIA          1                    1       53   151
6-24 months   ki1000108-IRC              INDIA          0                    0       39   151
6-24 months   ki1000108-IRC              INDIA          0                    1       27   151
6-24 months   ki1017093b-PROVIDE         BANGLADESH     1                    0       64   123
6-24 months   ki1017093b-PROVIDE         BANGLADESH     1                    1       27   123
6-24 months   ki1017093b-PROVIDE         BANGLADESH     0                    0       25   123
6-24 months   ki1017093b-PROVIDE         BANGLADESH     0                    1        7   123
6-24 months   ki1017093c-NIH-Crypto      BANGLADESH     1                    0       36    77
6-24 months   ki1017093c-NIH-Crypto      BANGLADESH     1                    1        8    77
6-24 months   ki1017093c-NIH-Crypto      BANGLADESH     0                    0       32    77
6-24 months   ki1017093c-NIH-Crypto      BANGLADESH     0                    1        1    77
6-24 months   ki1113344-GMS-Nepal        NEPAL          1                    0        2   346
6-24 months   ki1113344-GMS-Nepal        NEPAL          1                    1        1   346
6-24 months   ki1113344-GMS-Nepal        NEPAL          0                    0      170   346
6-24 months   ki1113344-GMS-Nepal        NEPAL          0                    1      173   346


The following strata were considered:

* agecat: 0-24 months, studyid: ki0047075b-MAL-ED, country: SOUTH AFRICA
* agecat: 0-24 months, studyid: ki1000108-CMC-V-BCS-2002, country: INDIA
* agecat: 0-24 months, studyid: ki1000108-IRC, country: INDIA
* agecat: 0-24 months, studyid: ki1017093b-PROVIDE, country: BANGLADESH
* agecat: 0-24 months, studyid: ki1017093c-NIH-Crypto, country: BANGLADESH
* agecat: 0-24 months, studyid: ki1113344-GMS-Nepal, country: NEPAL
* agecat: 0-6 months, studyid: ki0047075b-MAL-ED, country: SOUTH AFRICA
* agecat: 0-6 months, studyid: ki1000108-CMC-V-BCS-2002, country: INDIA
* agecat: 0-6 months, studyid: ki1000108-IRC, country: INDIA
* agecat: 0-6 months, studyid: ki1017093b-PROVIDE, country: BANGLADESH
* agecat: 0-6 months, studyid: ki1017093c-NIH-Crypto, country: BANGLADESH
* agecat: 0-6 months, studyid: ki1113344-GMS-Nepal, country: NEPAL
* agecat: 6-24 months, studyid: ki1000108-CMC-V-BCS-2002, country: INDIA
* agecat: 6-24 months, studyid: ki1000108-IRC, country: INDIA
* agecat: 6-24 months, studyid: ki1017093b-PROVIDE, country: BANGLADESH
* agecat: 6-24 months, studyid: ki1017093c-NIH-Crypto, country: BANGLADESH
* agecat: 6-24 months, studyid: ki1113344-GMS-Nepal, country: NEPAL

### Dropped Strata

Some strata were dropped due to rare outcomes:

* agecat: 0-24 months, studyid: ki0047075b-MAL-ED, country: SOUTH AFRICA
* agecat: 0-24 months, studyid: ki1113344-GMS-Nepal, country: NEPAL
* agecat: 0-6 months, studyid: ki0047075b-MAL-ED, country: SOUTH AFRICA
* agecat: 0-6 months, studyid: ki1113344-GMS-Nepal, country: NEPAL
* agecat: 6-24 months, studyid: ki1017093c-NIH-Crypto, country: BANGLADESH
* agecat: 6-24 months, studyid: ki1113344-GMS-Nepal, country: NEPAL

## Methods Detail

We're interested in the causal parameters $E[Y_a]$ for all values of $a \in \mathcal{A}$. These parameters represent the mean outcome if, possibly contrary to fact, we intervened to set all units to have $A=a$. Under the randomization and positivity assumptions, these are identified by the statistical parameters $\psi_a=E_W[E_{Y|A,W}(Y|A=a,W)]$.  In addition, we're interested in the mean of $Y$, $E[Y]$ under no intervention (the observed mean). We will estimate these parameters by using SuperLearner to fit the relevant likelihood factors -- $E_{Y|A,W}(Y|A=a,W)$ and $p(A=a|W)$, and then updating our likelihood fit using a joint TMLE.

For unadjusted analyses ($W=\{\}$), initial likelihoods were estimated using Lrnr_glm to estimate the simple $E(Y|A)$ and Lrnr_mean to estimate $p(A)$. For adjusted analyses, a small library containing Lrnr_glmnet, Lrnr_xgboost, and Lrnr_mean was used.

Having estimated these parameters, we will then use the delta method to estimate relative risks and attributable risks relative to a prespecified baseline level of $A$.

todo: add detail about dropping strata with rare outcomes, handling missingness



```
## Warning in learner$predict_fold(learner_task, fold_number): Lrnr_mean is
## not a cv-aware learner, so self$predict_fold reverts to self$predict
```

```
## Warning in learner$predict_fold(learner_task, fold_number): Lrnr_glm_TRUE
## is not a cv-aware learner, so self$predict_fold reverts to self$predict
```

```
## Warning in learner$predict_fold(learner_task, fold_number): Lrnr_mean is
## not a cv-aware learner, so self$predict_fold reverts to self$predict
```

```
## Warning in learner$predict_fold(learner_task, fold_number): Lrnr_glm_TRUE
## is not a cv-aware learner, so self$predict_fold reverts to self$predict
```

```
## Warning in learner$predict_fold(learner_task, fold_number): Lrnr_mean is
## not a cv-aware learner, so self$predict_fold reverts to self$predict
```

```
## Warning in learner$predict_fold(learner_task, fold_number): Lrnr_glm_TRUE
## is not a cv-aware learner, so self$predict_fold reverts to self$predict
```

```
## Warning in learner$predict_fold(learner_task, fold_number): Lrnr_mean is
## not a cv-aware learner, so self$predict_fold reverts to self$predict
```

```
## Warning in learner$predict_fold(learner_task, fold_number): Lrnr_glm_TRUE
## is not a cv-aware learner, so self$predict_fold reverts to self$predict
```

```
## Warning in learner$predict_fold(learner_task, fold_number): Lrnr_mean is
## not a cv-aware learner, so self$predict_fold reverts to self$predict
```

```
## Warning in learner$predict_fold(learner_task, fold_number): Lrnr_glm_TRUE
## is not a cv-aware learner, so self$predict_fold reverts to self$predict
```

```
## Warning in learner$predict_fold(learner_task, fold_number): Lrnr_mean is
## not a cv-aware learner, so self$predict_fold reverts to self$predict
```

```
## Warning in learner$predict_fold(learner_task, fold_number): Lrnr_glm_TRUE
## is not a cv-aware learner, so self$predict_fold reverts to self$predict
```




# Results Detail

## Results Plots
![](/tmp/b1ce8190-932c-43d3-94a3-14a53abfb557/22960bff-0e17-44b4-97f4-67d86e7d9d76/REPORT_files/figure-html/plot_tsm-1.png)<!-- -->

![](/tmp/b1ce8190-932c-43d3-94a3-14a53abfb557/22960bff-0e17-44b4-97f4-67d86e7d9d76/REPORT_files/figure-html/plot_rr-1.png)<!-- -->



![](/tmp/b1ce8190-932c-43d3-94a3-14a53abfb557/22960bff-0e17-44b4-97f4-67d86e7d9d76/REPORT_files/figure-html/plot_paf-1.png)<!-- -->

![](/tmp/b1ce8190-932c-43d3-94a3-14a53abfb557/22960bff-0e17-44b4-97f4-67d86e7d9d76/REPORT_files/figure-html/plot_par-1.png)<!-- -->

## Results Table

### Parameter: TSM


agecat        studyid                    country      intervention_level   baseline_level     estimate    ci_lower    ci_upper
------------  -------------------------  -----------  -------------------  ---------------  ----------  ----------  ----------
0-24 months   ki1000108-CMC-V-BCS-2002   INDIA        1                    NA                0.6868280   0.5892494   0.7844067
0-24 months   ki1000108-CMC-V-BCS-2002   INDIA        0                    NA                0.6035425   0.5322485   0.6748365
0-24 months   ki1000108-IRC              INDIA        1                    NA                0.6131615   0.5413437   0.6849793
0-24 months   ki1000108-IRC              INDIA        0                    NA                0.5690627   0.4889006   0.6492247
0-24 months   ki1017093b-PROVIDE         BANGLADESH   1                    NA                0.6132570   0.5482089   0.6783050
0-24 months   ki1017093b-PROVIDE         BANGLADESH   0                    NA                0.4906562   0.3781935   0.6031189
0-24 months   ki1017093c-NIH-Crypto      BANGLADESH   1                    NA                0.6008717   0.4955583   0.7061851
0-24 months   ki1017093c-NIH-Crypto      BANGLADESH   0                    NA                0.6406199   0.5456929   0.7355470
0-6 months    ki1000108-CMC-V-BCS-2002   INDIA        1                    NA                0.7314851   0.6300116   0.8329586
0-6 months    ki1000108-CMC-V-BCS-2002   INDIA        0                    NA                0.6354154   0.5470909   0.7237400
0-6 months    ki1000108-IRC              INDIA        1                    NA                0.6114105   0.5269068   0.6959142
0-6 months    ki1000108-IRC              INDIA        0                    NA                0.6606692   0.5618040   0.7595345
0-6 months    ki1017093b-PROVIDE         BANGLADESH   1                    NA                0.8169028   0.7539973   0.8798084
0-6 months    ki1017093b-PROVIDE         BANGLADESH   0                    NA                0.6688561   0.5285417   0.8091704
0-6 months    ki1017093c-NIH-Crypto      BANGLADESH   1                    NA                0.8840580   0.8071326   0.9609833
0-6 months    ki1017093c-NIH-Crypto      BANGLADESH   0                    NA                0.9285714   0.8672033   0.9899396
6-24 months   ki1000108-CMC-V-BCS-2002   INDIA        1                    NA                0.5772906   0.3979884   0.7565927
6-24 months   ki1000108-CMC-V-BCS-2002   INDIA        0                    NA                0.5565894   0.4481880   0.6649909
6-24 months   ki1000108-IRC              INDIA        1                    NA                0.6151879   0.5098243   0.7205516
6-24 months   ki1000108-IRC              INDIA        0                    NA                0.4178011   0.2840648   0.5515375
6-24 months   ki1017093b-PROVIDE         BANGLADESH   1                    NA                0.2967033   0.2039707   0.3894359
6-24 months   ki1017093b-PROVIDE         BANGLADESH   0                    NA                0.2187500   0.0526770   0.3848230


### Parameter: E(Y)


agecat        studyid                    country      intervention_level   baseline_level     estimate    ci_lower    ci_upper
------------  -------------------------  -----------  -------------------  ---------------  ----------  ----------  ----------
0-24 months   ki1000108-CMC-V-BCS-2002   INDIA        NA                   NA                0.6319018   0.5759256   0.6878781
0-24 months   ki1000108-IRC              INDIA        NA                   NA                0.5926893   0.5398764   0.6455022
0-24 months   ki1017093b-PROVIDE         BANGLADESH   NA                   NA                0.5830619   0.5262762   0.6398476
0-24 months   ki1017093c-NIH-Crypto      BANGLADESH   NA                   NA                0.6250000   0.5603522   0.6896478
0-6 months    ki1000108-CMC-V-BCS-2002   INDIA        NA                   NA                0.6748768   0.6092233   0.7405304
0-6 months    ki1000108-IRC              INDIA        NA                   NA                0.6336207   0.5704020   0.6968394
0-6 months    ki1017093b-PROVIDE         BANGLADESH   NA                   NA                0.7880435   0.7295878   0.8464992
0-6 months    ki1017093c-NIH-Crypto      BANGLADESH   NA                   NA                0.9064748   0.8572209   0.9557287
6-24 months   ki1000108-CMC-V-BCS-2002   INDIA        NA                   NA                0.5609756   0.4682842   0.6536670
6-24 months   ki1000108-IRC              INDIA        NA                   NA                0.5298013   0.4450066   0.6145960
6-24 months   ki1017093b-PROVIDE         BANGLADESH   NA                   NA                0.2764228   0.1950773   0.3577682


### Parameter: RR


agecat        studyid                    country      intervention_level   baseline_level     estimate    ci_lower    ci_upper
------------  -------------------------  -----------  -------------------  ---------------  ----------  ----------  ----------
0-24 months   ki1000108-CMC-V-BCS-2002   INDIA        1                    1                 1.0000000   1.0000000   1.0000000
0-24 months   ki1000108-CMC-V-BCS-2002   INDIA        0                    1                 0.8787389   0.7303236   1.0573148
0-24 months   ki1000108-IRC              INDIA        1                    1                 1.0000000   1.0000000   1.0000000
0-24 months   ki1000108-IRC              INDIA        0                    1                 0.9280795   0.7724989   1.1149939
0-24 months   ki1017093b-PROVIDE         BANGLADESH   1                    1                 1.0000000   1.0000000   1.0000000
0-24 months   ki1017093b-PROVIDE         BANGLADESH   0                    1                 0.8000825   0.6219575   1.0292214
0-24 months   ki1017093c-NIH-Crypto      BANGLADESH   1                    1                 1.0000000   1.0000000   1.0000000
0-24 months   ki1017093c-NIH-Crypto      BANGLADESH   0                    1                 1.0661509   0.8467944   1.3423304
0-6 months    ki1000108-CMC-V-BCS-2002   INDIA        1                    1                 1.0000000   1.0000000   1.0000000
0-6 months    ki1000108-CMC-V-BCS-2002   INDIA        0                    1                 0.8686649   0.7130083   1.0583029
0-6 months    ki1000108-IRC              INDIA        1                    1                 1.0000000   1.0000000   1.0000000
0-6 months    ki1000108-IRC              INDIA        0                    1                 1.0805657   0.8801971   1.3265463
0-6 months    ki1017093b-PROVIDE         BANGLADESH   1                    1                 1.0000000   1.0000000   1.0000000
0-6 months    ki1017093b-PROVIDE         BANGLADESH   0                    1                 0.8187707   0.6539520   1.0251294
0-6 months    ki1017093c-NIH-Crypto      BANGLADESH   1                    1                 1.0000000   1.0000000   1.0000000
0-6 months    ki1017093c-NIH-Crypto      BANGLADESH   0                    1                 1.0503513   0.9416311   1.1716243
6-24 months   ki1000108-CMC-V-BCS-2002   INDIA        1                    1                 1.0000000   1.0000000   1.0000000
6-24 months   ki1000108-CMC-V-BCS-2002   INDIA        0                    1                 0.9641409   0.6677764   1.3920344
6-24 months   ki1000108-IRC              INDIA        1                    1                 1.0000000   1.0000000   1.0000000
6-24 months   ki1000108-IRC              INDIA        0                    1                 0.6791439   0.4724455   0.9762742
6-24 months   ki1017093b-PROVIDE         BANGLADESH   1                    1                 1.0000000   1.0000000   1.0000000
6-24 months   ki1017093b-PROVIDE         BANGLADESH   0                    1                 0.7372685   0.3243804   1.6757021


### Parameter: PAR


agecat        studyid                    country      intervention_level   baseline_level      estimate     ci_lower     ci_upper
------------  -------------------------  -----------  -------------------  ---------------  -----------  -----------  -----------
0-24 months   ki1000108-CMC-V-BCS-2002   INDIA        1                    NA                -0.0549262   -0.1328501    0.0229977
0-24 months   ki1000108-IRC              INDIA        1                    NA                -0.0204722   -0.0678753    0.0269309
0-24 months   ki1017093b-PROVIDE         BANGLADESH   1                    NA                -0.0301951   -0.0611715    0.0007814
0-24 months   ki1017093c-NIH-Crypto      BANGLADESH   1                    NA                 0.0241283   -0.0505456    0.0988022
0-6 months    ki1000108-CMC-V-BCS-2002   INDIA        1                    NA                -0.0566083   -0.1402785    0.0270620
0-6 months    ki1000108-IRC              INDIA        1                    NA                 0.0222102   -0.0335519    0.0779722
0-6 months    ki1017093b-PROVIDE         BANGLADESH   1                    NA                -0.0288593   -0.0652301    0.0075114
0-6 months    ki1017093c-NIH-Crypto      BANGLADESH   1                    NA                 0.0224168   -0.0272673    0.0721010
6-24 months   ki1000108-CMC-V-BCS-2002   INDIA        1                    NA                -0.0163149   -0.1583339    0.1257041
6-24 months   ki1000108-IRC              INDIA        1                    NA                -0.0853866   -0.1622046   -0.0085686
6-24 months   ki1017093b-PROVIDE         BANGLADESH   1                    NA                -0.0202805   -0.0703437    0.0297826


### Parameter: PAF


agecat        studyid                    country      intervention_level   baseline_level      estimate     ci_lower     ci_upper
------------  -------------------------  -----------  -------------------  ---------------  -----------  -----------  -----------
0-24 months   ki1000108-CMC-V-BCS-2002   INDIA        1                    NA                -0.0869220   -0.2174628    0.0296217
0-24 months   ki1000108-IRC              INDIA        1                    NA                -0.0345413   -0.1176770    0.0424107
0-24 months   ki1017093b-PROVIDE         BANGLADESH   1                    NA                -0.0517871   -0.1064594    0.0001838
0-24 months   ki1017093c-NIH-Crypto      BANGLADESH   1                    NA                 0.0386053   -0.0893138    0.1515027
0-6 months    ki1000108-CMC-V-BCS-2002   INDIA        1                    NA                -0.0838794   -0.2163683    0.0341786
0-6 months    ki1000108-IRC              INDIA        1                    NA                 0.0350528   -0.0571857    0.1192435
0-6 months    ki1017093b-PROVIDE         BANGLADESH   1                    NA                -0.0366215   -0.0844204    0.0090705
0-6 months    ki1017093c-NIH-Crypto      BANGLADESH   1                    NA                 0.0247297   -0.0319638    0.0783086
6-24 months   ki1000108-CMC-V-BCS-2002   INDIA        1                    NA                -0.0290832   -0.3153734    0.1948962
6-24 months   ki1000108-IRC              INDIA        1                    NA                -0.1611672   -0.3225385   -0.0194859
6-24 months   ki1017093b-PROVIDE         BANGLADESH   1                    NA                -0.0733678   -0.2738040    0.0955293
